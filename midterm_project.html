<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="Mitch Borgert" />


<title>Midterm Election Predictions</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/journal.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #f8f8f8; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
pre, code { background-color: #f8f8f8; }
code > span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code > span.dt { color: #204a87; } /* DataType */
code > span.dv { color: #0000cf; } /* DecVal */
code > span.bn { color: #0000cf; } /* BaseN */
code > span.fl { color: #0000cf; } /* Float */
code > span.ch { color: #4e9a06; } /* Char */
code > span.st { color: #4e9a06; } /* String */
code > span.co { color: #8f5902; font-style: italic; } /* Comment */
code > span.ot { color: #8f5902; } /* Other */
code > span.al { color: #ef2929; } /* Alert */
code > span.fu { color: #000000; } /* Function */
code > span.er { color: #a40000; font-weight: bold; } /* Error */
code > span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #000000; } /* Constant */
code > span.sc { color: #000000; } /* SpecialChar */
code > span.vs { color: #4e9a06; } /* VerbatimString */
code > span.ss { color: #4e9a06; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #000000; } /* Variable */
code > span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code > span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code > span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code > span.ex { } /* Extension */
code > span.at { color: #c4a000; } /* Attribute */
code > span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code > span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 61px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 66px;
  margin-top: -66px;
}

.section h2 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h3 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h4 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h5 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h6 {
  padding-top: 66px;
  margin-top: -66px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Portfolio</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="about_me.html">About Me</a>
</li>
<li>
  <a href="contact.html">Contact</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Midterm Election Predictions</h1>
<h4 class="author"><em>Mitch Borgert</em></h4>

</div>


<div id="the-data" class="section level2">
<h2>The data:</h2>
<table style="width:78%;">
<colgroup>
<col width="11%" />
<col width="18%" />
<col width="18%" />
<col width="9%" />
<col width="9%" />
<col width="11%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">appr</th>
<th align="center">samplesize</th>
<th align="center">enddate</th>
<th align="center">dem</th>
<th align="center">rep</th>
<th align="center">demwin</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">47.04</td>
<td align="center">1043</td>
<td align="center">2017-01-24</td>
<td align="center">48</td>
<td align="center">40</td>
<td align="center">8</td>
</tr>
<tr class="even">
<td align="center">46.49</td>
<td align="center">725</td>
<td align="center">2017-01-31</td>
<td align="center">45</td>
<td align="center">42</td>
<td align="center">3</td>
</tr>
<tr class="odd">
<td align="center">46.65</td>
<td align="center">1000</td>
<td align="center">2017-02-06</td>
<td align="center">42.4</td>
<td align="center">44</td>
<td align="center">-1.6</td>
</tr>
<tr class="even">
<td align="center">46.65</td>
<td align="center">617</td>
<td align="center">2017-02-06</td>
<td align="center">48.1</td>
<td align="center">46.3</td>
<td align="center">1.8</td>
</tr>
<tr class="odd">
<td align="center">46.81</td>
<td align="center">712</td>
<td align="center">2017-02-08</td>
<td align="center">49</td>
<td align="center">41</td>
<td align="center">8</td>
</tr>
<tr class="even">
<td align="center">45.95</td>
<td align="center">1000</td>
<td align="center">2017-02-20</td>
<td align="center">43.5</td>
<td align="center">43.8</td>
<td align="center">-0.3</td>
</tr>
</tbody>
</table>
<div id="this-data-created-from-two-datasets-from-538.-appr-is-the-presidents-approval-rating-samplesize-is-the-sample-size-of-each-poll-enddate-is-when-the-poll-was-finished-and-dem-and-rep-are-what-percent-of-people-want-to-vote-for-each-party.-i-created-the-demwin-variable-since-i-was-prediction-the-chance-the-democrats-would-have-a-majority.-this-variable-was-just-dem---rep-to-see-the-difference-in-support." class="section level3">
<h3>This data created from two datasets from 538. Appr is the presidents approval rating, samplesize is the sample size of each poll, enddate is when the poll was finished, and dem and rep are what percent of people want to vote for each party. I created the demwin variable since I was prediction the chance the democrats would have a majority. This variable was just dem - rep to see the difference in support.</h3>
</div>
</div>
<div id="predictions-using-a-linear-model" class="section level2">
<h2>Predictions using a linear model:</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(predictions, <span class="kw">aes</span>(<span class="dt">x =</span> seats)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_histogram</span>(<span class="dt">bins =</span> <span class="dv">10</span>)</code></pre></div>
<p><img src="midterm_project_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(predictions<span class="op">$</span>super)</code></pre></div>
<pre><code>## [1] 0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(predictions<span class="op">$</span>regmaj)</code></pre></div>
<pre><code>## [1] 1</code></pre>
<div id="first-i-created-a-linear-model-which-used-appr-samplesize-and-enddate-as-predictors-for-demwin.-i-then-created-a-dataframe-with-approval-from-30-to-50-since-thats-close-to-the-range-of-his-approval-sample-size-constant-at-1000-and-the-end-date-constant-at-the-last-data-a-poll-was-recorded.-i-used-this-dataframe-to-create-a-distribution-of-predictions-for-democratic-support-over-republicans-based-on-trumps-approval-rating.-i-then-used-the-predictions-to-find-how-many-more-seats-in-the-house-one-party-would-win-over-the-other.-one-party-must-have-70-more-seats-than-the-other-to-have-a-super-majority-and-1-more-seat-to-have-a-regular-majority.-the-probability-for-a-super-majority-is-1-and-the-probability-for-a-regular-majority-is-0." class="section level3">
<h3>First I created a linear model which used appr, samplesize, and enddate as predictors for demwin. I then created a dataframe with approval from 30% to 50% since thats close to the range of his approval, sample size constant at 1000, and the end date constant at the last data a poll was recorded. I used this dataframe to create a distribution of predictions for democratic support over republicans based on Trumpâ€™s approval rating. I then used the predictions to find how many more seats in the house one party would win over the other. One party must have 70 more seats than the other to have a super majority and 1 more seat to have a regular majority. The probability for a super majority is 1 and the probability for a regular majority is 0.</h3>
</div>
</div>
<div id="predictions-using-a-cross-validated-tree" class="section level2">
<h2>Predictions using a cross validated tree:</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat =<span class="st"> </span>mid_appr <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(demwin,appr,samplesize,enddate)
<span class="kw">set.seed</span>(<span class="dv">1</span>)
mod2 &lt;-<span class="st"> </span><span class="kw">tree</span>(demwin <span class="op">~</span><span class="st"> </span>.<span class="op">-</span>demwin, <span class="dt">data =</span> dat)

cv.dat &lt;-<span class="st"> </span><span class="kw">cv.tree</span>(mod2)
<span class="kw">plot</span>(cv.dat)</code></pre></div>
<p><img src="midterm_project_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mod2prune &lt;-<span class="st"> </span><span class="kw">prune.tree</span>(mod2, <span class="dt">best =</span> <span class="dv">8</span>)
<span class="kw">plot</span>(mod2prune)
<span class="kw">text</span>(mod2prune, <span class="dt">pretty =</span> <span class="dv">0</span>)</code></pre></div>
<p><img src="midterm_project_files/figure-html/unnamed-chunk-4-2.png" width="672" /></p>
<div id="first-i-made-the-tree-and-pruned-it." class="section level3">
<h3>First I made the tree and pruned it.</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">predictions2 =<span class="st"> </span><span class="kw">data.frame</span>(<span class="kw">predict</span>(mod2prune,df))</code></pre></div>
<pre><code>## Warning in pred1.tree(object, tree.matrix(newdata)): NAs introduced by
## coercion</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">predictions2 =<span class="st"> </span>predictions2 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">probs =</span> predict.mod2prune..df.<span class="op">/</span><span class="dv">100</span>, <span class="dt">seats =</span> <span class="dv">468</span><span class="op">*</span>probs) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">super =</span> <span class="kw">as.numeric</span>((seats <span class="op">&gt;</span><span class="st"> </span><span class="dv">70</span>)), <span class="dt">regmaj =</span> <span class="kw">as.numeric</span>((seats <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>)) )
<span class="kw">ggplot</span>(predictions2, <span class="kw">aes</span>(<span class="dt">x =</span> seats)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_histogram</span>()</code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="midterm_project_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(predictions2<span class="op">$</span>super)</code></pre></div>
<pre><code>## [1] 0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(predictions2<span class="op">$</span>regmaj)</code></pre></div>
<pre><code>## [1] 1</code></pre>
</div>
<div id="i-have-the-same-variables-as-before-but-this-time-i-made-a-tree.-democrats-are-100-expected-to-have-a-majority-but-they-are-not-expected-to-have-a-super-majority-according-to-this-tree.-i-feel-that-a-tree-would-be-much-better-with-more-related-variables-in-the-dataframe." class="section level3">
<h3>I have the same variables as before but this time I made a tree. Democrats are 100% expected to have a majority, but they are not expected to have a super majority according to this tree. I feel that a tree would be much better with more related variables in the dataframe.</h3>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
